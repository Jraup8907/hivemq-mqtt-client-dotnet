"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[429],{8799:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>r,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>c,toc:()=>h});var i=s(5893),n=s(1151);const l={},o="Publish",c={id:"how-to/publish",title:"Publish",description:"The simple way to publish a message is to use the following API:",source:"@site/docs/how-to/publish.md",sourceDirName:"how-to",slug:"/how-to/publish",permalink:"/hivemq-mqtt-client-dotnet/docs/how-to/publish",draft:!1,unlisted:!1,editUrl:"https://github.com/hivemq/hivemq-mqtt-client-dotnet/tree/main/Documentation/docs/how-to/publish.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Securely Connect to a Broker with Basic Authentication Credentials",permalink:"/hivemq-mqtt-client-dotnet/docs/how-to/connect-with-auth"},next:{title:"How to set a Last Will & Testament",permalink:"/hivemq-mqtt-client-dotnet/docs/how-to/set-lwt"}},r={},h=[];function a(e){const t={a:"a",code:"code",h1:"h1",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,n.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"publish",children:"Publish"}),"\n",(0,i.jsx)(t.h1,{id:"simple",children:"Simple"}),"\n",(0,i.jsx)(t.p,{children:"The simple way to publish a message is to use the following API:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-csharp",children:"await client.PublishAsync(\n                \"core/dynamic_graph/entity/227489\", // Topic to publish to\n                \"{'2023': '\ud83d\udc4d'}\"                    // Message to publish\n                QualityOfService.AtMostOnceDelivery\n                ).ConfigureAwait(false);\n\n"})}),"\n",(0,i.jsx)(t.p,{children:"The 3 arguments are:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["The topic to publish to (",(0,i.jsx)(t.code,{children:"string"}),")"]}),"\n",(0,i.jsxs)(t.li,{children:["The message to publish (",(0,i.jsx)(t.code,{children:"string"})," or ",(0,i.jsx)(t.code,{children:"byte[]"}),")"]}),"\n",(0,i.jsxs)(t.li,{children:["Quality of Service level (defaults to ",(0,i.jsx)(t.code,{children:"AtMostOnceDelivery"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["For the Quality of Service, see the ",(0,i.jsx)(t.a,{href:"https://github.com/hivemq/hivemq-mqtt-client-dotnet/blob/main/Source/HiveMQtt/MQTT5/Types/QualityOfService.cs",children:"QualityOfService enum"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"But if you want more control and extended options for a publish, see the next section."}),"\n",(0,i.jsx)(t.h1,{id:"mqtt5publishmessage",children:"MQTT5PublishMessage"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.a,{href:"https://github.com/hivemq/hivemq-mqtt-client-dotnet/blob/main/Source/HiveMQtt/MQTT5/Types/MQTT5PublishMessage.cs",children:"MQTT5PublishMessage"})," class represents the entirety of a publish message in MQTT.  If you construct this class directly, you can access all of the MQTT publish options such as ",(0,i.jsx)(t.code,{children:"Retain"}),", ",(0,i.jsx)(t.code,{children:"PayloadFormatIndicator"}),", ",(0,i.jsx)(t.code,{children:"UserProperties"})," and so forth."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-csharp",children:'var message = new MQTT5PublishMessage\n{\n    Topic = topic,\n    Payload = Encoding.ASCII.GetBytes(payload),\n    QoS = qos,\n};\n\nmessage.Retain = True\nmessage.UserProperties.Add("Client-Geo", "-33.8688, 151.2093");\n\nvar result = await client.PublishAsync(message);\n'})}),"\n",(0,i.jsxs)(t.p,{children:["For the full details, see the source code on ",(0,i.jsx)(t.a,{href:"https://github.com/hivemq/hivemq-mqtt-client-dotnet/blob/main/Source/HiveMQtt/MQTT5/Types/MQTT5PublishMessage.cs",children:"MQTT5PublishMessage"}),"."]}),"\n",(0,i.jsxs)(t.h1,{id:"publish-return-value-publishresult",children:["Publish Return Value: ",(0,i.jsx)(t.code,{children:"PublishResult"})]}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"PublishAsync"})," method returns a ",(0,i.jsx)(t.code,{children:"PublishResult"})," object."]}),"\n",(0,i.jsxs)(t.p,{children:["For ",(0,i.jsx)(t.code,{children:"QualityOfService.AtMostOnceDelivery"}),", since it's a \"fire-and-forget\" method, it doesn't contain any useful information."]}),"\n",(0,i.jsxs)(t.p,{children:["For ",(0,i.jsx)(t.code,{children:"QualityOfService.AtLeastOnceDelivery"})," (QoS level 1) and ",(0,i.jsx)(t.code,{children:"QualityOfService.ExactlyOnceDelivery"})," (QoS level 2), the ",(0,i.jsx)(t.code,{children:"PublishResult"})," contains ",(0,i.jsx)(t.code,{children:"PublishResult.QoS1ReasonCode"})," and ",(0,i.jsx)(t.code,{children:"PublishResult.QoS2ReasonCode"})," respectfully."]}),"\n",(0,i.jsxs)(t.p,{children:["For ease of use, you can call ",(0,i.jsx)(t.code,{children:"PublishResult.ReasonCode()"})," to retrieve the appropriate result code automatically."]}),"\n",(0,i.jsx)(t.h1,{id:"see-also",children:"See Also"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://github.com/hivemq/hivemq-mqtt-client-dotnet/blob/main/Source/HiveMQtt/MQTT5/Types/MQTT5PublishMessage.cs",children:"MQTT5PublishMessage"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://github.com/hivemq/hivemq-mqtt-client-dotnet/blob/main/Source/HiveMQtt/MQTT5/Types/QualityOfService.cs",children:"QualityOfService"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://github.com/hivemq/hivemq-mqtt-client-dotnet/blob/main/Source/HiveMQtt/Client/Results/PublishResult.cs",children:"PublishResult"})}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},1151:(e,t,s)=>{s.d(t,{Z:()=>c,a:()=>o});var i=s(7294);const n={},l=i.createContext(n);function o(e){const t=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),i.createElement(l.Provider,{value:t},e.children)}}}]);