import{a as H,b as Y,c as _,d as X,e as b,f as F,g as bt,h as kt}from"./chunk-U66T5BMR.min.js";import"./chunk-YAMJ4ASO.min.js";import{a as mt,b as z}from"./chunk-I64Z623A.min.js";import"./chunk-3RELVOUY.min.js";import"./chunk-DALFUHAB.min.js";import{b as R,c as ot,e as w,g as yt,h as vt,i as gt,j as xt,k as wt}from"./chunk-EKFGDCJ4.min.js";import{F as P,G as ft,Ga as G,J as ee,Ja as lt,La as ct,Qa as q,Ra as Q,ab as St,b as jt,c as te,h as y,i as ut,jb as J,k as ht}from"./chunk-YICCS3KT.min.js";import{d as it}from"./chunk-P42HNYSU.min.js";var K={normal:re,vee:ae,undirected:ne};function _t(t){K=t}function re(t,e,r,a){var n=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");_(n,r[a+"Style"]),r[a+"Class"]&&n.attr("class",r[a+"Class"])}function ae(t,e,r,a){var n=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");_(n,r[a+"Style"]),r[a+"Class"]&&n.attr("class",r[a+"Class"])}function ne(t,e,r,a){var n=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");_(n,r[a+"Style"]),r[a+"Class"]&&n.attr("class",r[a+"Class"])}function Lt(t,e){var r=t;return r.node().appendChild(e.label),_(r,e.labelStyle),r}function Et(t,e){for(var r=t.append("text"),a=se(e.label).split("\n"),n=0;n<a.length;n++)r.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(a[n]);return _(r,e.labelStyle),r}function se(t){for(var e,r="",a=!1,n=0;n<t.length;++n)if(e=t[n],a){if("n"===e)r+="\n";else r+=e;a=!1}else"\\"===e?a=!0:r+=e;return r}function U(t,e,r){var a=e.label,n=t.append("g");"svg"===e.labelType?Lt(n,e):"string"!=typeof a||"html"===e.labelType?F(n,e):Et(n,e);var i,l=n.node().getBBox();switch(r){case"top":i=-e.height/2;break;case"bottom":i=e.height/2-l.height;break;default:i=-l.height/2}return n.attr("transform","translate("+-l.width/2+","+i+")"),n}var Z=function(t,e){var r=e.nodes().filter((function(t){return H(e,t)})),a=t.selectAll("g.cluster").data(r,(function(t){return t}));b(a.exit(),e).style("opacity",0).remove();var n=a.enter().append("g").attr("class","cluster").attr("id",(function(t){return e.node(t).id})).style("opacity",0).each((function(t){var r=e.node(t),a=y(this);y(this).append("rect"),U(a.append("g").attr("class","label"),r,r.clusterLabelPos)}));return a=a.merge(n),(a=b(a,e).style("opacity",1)).selectAll("rect").each((function(t){var r=e.node(t),a=y(this);_(a,r.style)})),a};function Tt(t){Z=t}var j=function(t,e){var r,a=t.selectAll("g.edgeLabel").data(e.edges(),(function(t){return Y(t)})).classed("update",!0);return a.exit().remove(),a.enter().append("g").classed("edgeLabel",!0).style("opacity",0),(a=t.selectAll("g.edgeLabel")).each((function(t){var r=y(this);r.select(".label").remove();var a=e.edge(t),n=U(r,e.edge(t),0).classed("label",!0),i=n.node().getBBox();a.labelId&&n.attr("id",a.labelId),w(a,"width")||(a.width=i.width),w(a,"height")||(a.height=i.height)})),r=a.exit?a.exit():a.selectAll(null),b(r,e).style("opacity",0).remove(),a};function Nt(t){j=t}function dt(t,e){return t.intersect(e)}var tt=function(t,e,r){var a=t.selectAll("g.edgePath").data(e.edges(),(function(t){return Y(t)})).classed("update",!0),n=de(a,e);pe(a,e);var i=void 0!==a.merge?a.merge(n):a;return b(i,e).style("opacity",1),i.each((function(t){var r=y(this),a=e.edge(t);a.elem=this,a.id&&r.attr("id",a.id),X(r,a.class,(r.classed("update")?"update ":"")+"edgePath")})),i.selectAll("path.path").each((function(t){var r=e.edge(t);r.arrowheadId=gt("arrowhead");var a=y(this).attr("marker-end",(function(){return"url("+oe(location.href,r.arrowheadId)+")"})).style("fill","none");b(a,e).attr("d",(function(t){return le(e,t)})),_(a,r.style)})),i.selectAll("defs *").remove(),i.selectAll("defs").each((function(t){var a=e.edge(t);(0,r[a.arrowhead])(y(this),a.arrowheadId,a,"arrowhead")})),i};function Ct(t){tt=t}function oe(t,e){return t.split("#")[0]+"#"+e}function le(t,e){var r=t.edge(e),a=t.node(e.v),n=t.node(e.w),i=r.points.slice(1,r.points.length-1);return i.unshift(dt(a,i[0])),i.push(dt(n,i[i.length-1])),At(r,i)}function At(t,e){var r=(ft||ht.line)().x((function(t){return t.x})).y((function(t){return t.y}));return(r.curve||r.interpolate)(t.curve),r(e)}function ce(t){var e=t.getBBox(),r=t.ownerSVGElement.getScreenCTM().inverse().multiply(t.getScreenCTM()).translate(e.width/2,e.height/2);return{x:r.e,y:r.f}}function de(t,e){var r=t.enter().append("g").attr("class","edgePath").style("opacity",0);return r.append("path").attr("class","path").attr("d",(function(t){var r=e.edge(t),a=e.node(t.v).elem;return At(r,vt(r.points.length).map((function(){return ce(a)})))})),r.append("defs"),r}function pe(t,e){var r=t.exit();b(r,e).style("opacity",0).remove()}var et=function(t,e,r){var a,n=e.nodes().filter((function(t){return!H(e,t)})),i=t.selectAll("g.node").data(n,(function(t){return t})).classed("update",!0);return i.exit().remove(),i.enter().append("g").attr("class","node").style("opacity",0),(i=t.selectAll("g.node")).each((function(t){var a=e.node(t),n=y(this);X(n,a.class,(n.classed("update")?"update ":"")+"node"),n.select("g.label").remove();var i=n.append("g").attr("class","label"),l=U(i,a),s=r[a.shape],o=yt(l.node().getBBox(),"width","height");a.elem=this,a.id&&n.attr("id",a.id),a.labelId&&i.attr("id",a.labelId),w(a,"width")&&(o.width=a.width),w(a,"height")&&(o.height=a.height),o.width+=a.paddingLeft+a.paddingRight,o.height+=a.paddingTop+a.paddingBottom,i.attr("transform","translate("+(a.paddingLeft-a.paddingRight)/2+","+(a.paddingTop-a.paddingBottom)/2+")");var d=y(this);d.select(".label-container").remove();var c=s(d,o,a).classed("label-container",!0);_(c,a.style);var h=c.node().getBBox();a.width=h.width,a.height=h.height})),a=i.exit?i.exit():i.selectAll(null),b(a,e).style("opacity",0).remove(),i};function It(t){et=t}function Bt(t,e){var r=t.filter((function(){return!y(this).classed("update")}));function a(t){var r=e.node(t);return"translate("+r.x+","+r.y+")"}r.attr("transform",a),b(t,e).style("opacity",1).attr("transform",a),b(r.selectAll("rect"),e).attr("width",(function(t){return e.node(t).width})).attr("height",(function(t){return e.node(t).height})).attr("x",(function(t){return-e.node(t).width/2})).attr("y",(function(t){return-e.node(t).height/2}))}function Mt(t,e){function r(t){var r=e.edge(t);return w(r,"x")?"translate("+r.x+","+r.y+")":""}t.filter((function(){return!y(this).classed("update")})).attr("transform",r),b(t,e).style("opacity",1).attr("transform",r)}function Dt(t,e){function r(t){var r=e.node(t);return"translate("+r.x+","+r.y+")"}t.filter((function(){return!y(this).classed("update")})).attr("transform",r),b(t,e).style("opacity",1).attr("transform",r)}function rt(t,e,r,a){var n=t.x,i=t.y,l=n-a.x,s=i-a.y,o=Math.sqrt(e*e*s*s+r*r*l*l),d=Math.abs(e*r*l/o);a.x<n&&(d=-d);var c=Math.abs(e*r*s/o);return a.y<i&&(c=-c),{x:n+d,y:i+c}}function Pt(t,e,r){return rt(t,e,e,r)}function Gt(t,e,r,a){var n,i,l,s,o,d,c,h,u,p,f,g,y;if(n=e.y-t.y,l=t.x-e.x,o=e.x*t.y-t.x*e.y,u=n*r.x+l*r.y+o,p=n*a.x+l*a.y+o,!(0!==u&&0!==p&&Rt(u,p)||(i=a.y-r.y,s=r.x-a.x,d=a.x*r.y-r.x*a.y,c=i*t.x+s*t.y+d,h=i*e.x+s*e.y+d,0!==c&&0!==h&&Rt(c,h)||(f=n*s-i*l,0===f))))return g=Math.abs(f/2),{x:(y=l*d-s*o)<0?(y-g)/f:(y+g)/f,y:(y=i*o-n*d)<0?(y-g)/f:(y+g)/f}}function Rt(t,e){return t*e>0}function T(t,e,r){var a=t.x,n=t.y,i=[],l=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach((function(t){l=Math.min(l,t.x),s=Math.min(s,t.y)}));for(var o=a-t.width/2-l,d=n-t.height/2-s,c=0;c<e.length;c++){var h=e[c],u=e[c<e.length-1?c+1:0],p=Gt(t,r,{x:o+h.x,y:d+h.y},{x:o+u.x,y:d+u.y});p&&i.push(p)}return i.length?(i.length>1&&i.sort((function(t,e){var a=t.x-r.x,n=t.y-r.y,i=Math.sqrt(a*a+n*n),l=e.x-r.x,s=e.y-r.y,o=Math.sqrt(l*l+s*s);return i<o?-1:i===o?0:1})),i[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",t),t)}function W(t,e){var r,a,n=t.x,i=t.y,l=e.x-n,s=e.y-i,o=t.width/2,d=t.height/2;return Math.abs(s)*o>Math.abs(l)*d?(s<0&&(d=-d),r=0===s?0:d*l/s,a=d):(l<0&&(o=-o),r=o,a=0===l?0:o*s/l),{x:n+r,y:i+a}}var at={rect:ye,ellipse:ve,circle:ge,diamond:xe};function Ut(t){at=t}function ye(t,e,r){var a=t.insert("rect",":first-child").attr("rx",r.rx).attr("ry",r.ry).attr("x",-e.width/2).attr("y",-e.height/2).attr("width",e.width).attr("height",e.height);return r.intersect=function(t){return W(r,t)},a}function ve(t,e,r){var a=e.width/2,n=e.height/2,i=t.insert("ellipse",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("rx",a).attr("ry",n);return r.intersect=function(t){return rt(r,a,n,t)},i}function ge(t,e,r){var a=Math.max(e.width,e.height)/2,n=t.insert("circle",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("r",a);return r.intersect=function(t){return Pt(r,a,t)},n}function xe(t,e,r){var a=e.width*Math.SQRT2/2,n=e.height*Math.SQRT2/2,i=[{x:0,y:-n},{x:-a,y:0},{x:0,y:n},{x:a,y:0}],l=t.insert("polygon",":first-child").attr("points",i.map((function(t){return t.x+","+t.y})).join(" "));return r.intersect=function(t){return T(r,i,t)},l}function pt(){var t=function(t,e){ke(e);var r=V(t,"output"),a=V(r,"clusters"),n=V(r,"edgePaths"),i=j(V(r,"edgeLabels"),e),l=et(V(r,"nodes"),e,at);wt(e),Dt(l,e),Mt(i,e),tt(n,e,K),Bt(Z(a,e),e),Se(e)};return t.createNodes=function(e){return arguments.length?(It(e),t):et},t.createClusters=function(e){return arguments.length?(Tt(e),t):Z},t.createEdgeLabels=function(e){return arguments.length?(Nt(e),t):j},t.createEdgePaths=function(e){return arguments.length?(Ct(e),t):tt},t.shapes=function(e){return arguments.length?(Ut(e),t):at},t.arrows=function(e){return arguments.length?(_t(e),t):K},t}var we={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},be={arrowhead:"normal",curve:P};function ke(t){t.nodes().forEach((function(e){var r=t.node(e);!w(r,"label")&&!t.children(e).length&&(r.label=e),w(r,"paddingX")&&R(r,{paddingLeft:r.paddingX,paddingRight:r.paddingX}),w(r,"paddingY")&&R(r,{paddingTop:r.paddingY,paddingBottom:r.paddingY}),w(r,"padding")&&R(r,{paddingLeft:r.padding,paddingRight:r.padding,paddingTop:r.padding,paddingBottom:r.padding}),R(r,we),ot(["paddingLeft","paddingRight","paddingTop","paddingBottom"],(function(t){r[t]=Number(r[t])})),w(r,"width")&&(r._prevWidth=r.width),w(r,"height")&&(r._prevHeight=r.height)})),t.edges().forEach((function(e){var r=t.edge(e);w(r,"label")||(r.label=""),R(r,be)}))}function Se(t){ot(t.nodes(),(function(e){var r=t.node(e);w(r,"_prevWidth")?r.width=r._prevWidth:delete r.width,w(r,"_prevHeight")?r.height=r._prevHeight:delete r.height,delete r._prevWidth,delete r._prevHeight}))}function V(t,e){var r=t.select("g."+e);return r.empty()&&(r=t.append("g").attr("class",e)),r}var Nr=it(jt(),1),Cr=it(te(),1),Ar=it(ee(),1);function Wt(t,e,r){let a=.9*(e.width+e.height),n=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}],i=A(t,a,a,n);return r.intersect=function(t){return T(r,n,t)},i}function Vt(t,e,r){let a=e.height,n=a/4,i=e.width+2*n,l=[{x:n,y:0},{x:i-n,y:0},{x:i,y:-a/2},{x:i-n,y:-a},{x:n,y:-a},{x:0,y:-a/2}],s=A(t,i,a,l);return r.intersect=function(t){return T(r,l,t)},s}function $t(t,e,r){let a=e.width,n=e.height,i=[{x:-n/2,y:0},{x:a,y:0},{x:a,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}],l=A(t,a,n,i);return r.intersect=function(t){return T(r,i,t)},l}function zt(t,e,r){let a=e.width,n=e.height,i=[{x:-2*n/6,y:0},{x:a-n/6,y:0},{x:a+2*n/6,y:-n},{x:n/6,y:-n}],l=A(t,a,n,i);return r.intersect=function(t){return T(r,i,t)},l}function Ht(t,e,r){let a=e.width,n=e.height,i=[{x:2*n/6,y:0},{x:a+n/6,y:0},{x:a-2*n/6,y:-n},{x:-n/6,y:-n}],l=A(t,a,n,i);return r.intersect=function(t){return T(r,i,t)},l}function Yt(t,e,r){let a=e.width,n=e.height,i=[{x:-2*n/6,y:0},{x:a+2*n/6,y:0},{x:a-n/6,y:-n},{x:n/6,y:-n}],l=A(t,a,n,i);return r.intersect=function(t){return T(r,i,t)},l}function Xt(t,e,r){let a=e.width,n=e.height,i=[{x:n/6,y:0},{x:a-n/6,y:0},{x:a+2*n/6,y:-n},{x:-2*n/6,y:-n}],l=A(t,a,n,i);return r.intersect=function(t){return T(r,i,t)},l}function Ft(t,e,r){let a=e.width,n=e.height,i=[{x:0,y:0},{x:a+n/2,y:0},{x:a,y:-n/2},{x:a+n/2,y:-n},{x:0,y:-n}],l=A(t,a,n,i);return r.intersect=function(t){return T(r,i,t)},l}function qt(t,e,r){let a=e.height,n=e.width+a/4,i=t.insert("rect",":first-child").attr("rx",a/2).attr("ry",a/2).attr("x",-n/2).attr("y",-a/2).attr("width",n).attr("height",a);return r.intersect=function(t){return W(r,t)},i}function Qt(t,e,r){let a=e.width,n=e.height,i=[{x:0,y:0},{x:a,y:0},{x:a,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],l=A(t,a,n,i);return r.intersect=function(t){return T(r,i,t)},l}function Jt(t,e,r){let a=e.width,n=a/2,i=n/(2.5+a/50),l=e.height+i,s="M 0,"+i+" a "+n+","+i+" 0,0,0 "+a+" 0 a "+n+","+i+" 0,0,0 "+-a+" 0 l 0,"+l+" a "+n+","+i+" 0,0,0 "+a+" 0 l 0,"+-l,o=t.attr("label-offset-y",i).insert("path",":first-child").attr("d",s).attr("transform","translate("+-a/2+","+-(l/2+i)+")");return r.intersect=function(t){let e=W(r,t),a=e.x-r.x;if(0!=n&&(Math.abs(a)<r.width/2||Math.abs(a)==r.width/2&&Math.abs(e.y-r.y)>r.height/2-i)){let l=i*i*(1-a*a/(n*n));0!=l&&(l=Math.sqrt(l)),l=i-l,t.y-r.y>0&&(l=-l),e.y+=l}return e},o}function Ee(t){t.shapes().question=Wt,t.shapes().hexagon=Vt,t.shapes().stadium=qt,t.shapes().subroutine=Qt,t.shapes().cylinder=Jt,t.shapes().rect_left_inv_arrow=$t,t.shapes().lean_right=zt,t.shapes().lean_left=Ht,t.shapes().trapezoid=Yt,t.shapes().inv_trapezoid=Xt,t.shapes().rect_right_inv_arrow=Ft}function Te(t){t({question:Wt}),t({hexagon:Vt}),t({stadium:qt}),t({subroutine:Qt}),t({cylinder:Jt}),t({rect_left_inv_arrow:$t}),t({lean_right:zt}),t({lean_left:Ht}),t({trapezoid:Yt}),t({inv_trapezoid:Xt}),t({rect_right_inv_arrow:Ft})}function A(t,e,r,a){return t.insert("polygon",":first-child").attr("points",a.map((function(t){return t.x+","+t.y})).join(" ")).attr("transform","translate("+-e/2+","+r/2+")")}var Ne={addToRender:Ee,addToRenderV2:Te},Kt={},Ce=function(t){let e=Object.keys(t);for(let r of e)Kt[r]=t[r]},Zt=function(t,e,r,a,n,i){let l=a?a.select(`[id="${r}"]`):y(`[id="${r}"]`),s=n||document;Object.keys(t).forEach((function(r){let a=t[r],n="default";a.classes.length>0&&(n=a.classes.join(" "));let o,d=Q(a.styles),c=void 0!==a.text?a.text:a.id;if(lt(J().flowchart.htmlLabels)){let t={label:c.replace(/fa[blrs]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`))};o=F(l,t).node(),o.parentNode.removeChild(o)}else{let t=s.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",d.labelStyle.replace("color:","fill:"));let e=c.split(ct.lineBreakRegex);for(let r of e){let e=s.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.setAttribute("dy","1em"),e.setAttribute("x","1"),e.textContent=r,t.appendChild(e)}o=t}let h=0,u="";switch(a.type){case"round":h=5,u="rect";break;case"square":case"group":default:u="rect";break;case"diamond":u="question";break;case"hexagon":u="hexagon";break;case"odd":case"odd_right":u="rect_left_inv_arrow";break;case"lean_right":u="lean_right";break;case"lean_left":u="lean_left";break;case"trapezoid":u="trapezoid";break;case"inv_trapezoid":u="inv_trapezoid";break;case"circle":u="circle";break;case"ellipse":u="ellipse";break;case"stadium":u="stadium";break;case"subroutine":u="subroutine";break;case"cylinder":u="cylinder"}G.warn("Adding node",a.id,a.domId),e.setNode(i.db.lookUpDomId(a.id),{labelType:"svg",labelStyle:d.labelStyle,shape:u,label:o,rx:h,ry:h,class:n,style:d.style,id:i.db.lookUpDomId(a.id)})}))},Ot=function(t,e,r){let a,n,i=0;if(void 0!==t.defaultStyle){let e=Q(t.defaultStyle);a=e.style,n=e.labelStyle}t.forEach((function(l){i++;let s="L-"+l.start+"-"+l.end,o="LS-"+l.start,d="LE-"+l.end,c={};"arrow_open"===l.type?c.arrowhead="none":c.arrowhead="normal";let h="",u="";if(void 0!==l.style){let t=Q(l.style);h=t.style,u=t.labelStyle}else switch(l.stroke){case"normal":h="fill:none",void 0!==a&&(h=a),void 0!==n&&(u=n);break;case"dotted":h="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":h=" stroke-width: 3.5px;fill:none"}c.style=h,c.labelStyle=u,void 0!==l.interpolate?c.curve=q(l.interpolate,P):void 0!==t.defaultInterpolate?c.curve=q(t.defaultInterpolate,P):c.curve=q(Kt.curve,P),void 0===l.text?void 0!==l.style&&(c.arrowheadStyle="fill: #333"):(c.arrowheadStyle="fill: #333",c.labelpos="c",lt(J().flowchart.htmlLabels)?(c.labelType="html",c.label=`<span id="L-${s}" class="edgeLabel L-${o}' L-${d}" style="${c.labelStyle}">${l.text.replace(/fa[blrs]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`))}</span>`):(c.labelType="text",c.label=l.text.replace(ct.lineBreakRegex,"\n"),void 0===l.style&&(c.style=c.style||"stroke: #333; stroke-width: 1.5px;fill:none"),c.labelStyle=c.labelStyle.replace("color:","fill:"))),c.id=s,c.class=o+" "+d,c.minlen=l.length||1,e.setEdge(r.db.lookUpDomId(l.start),r.db.lookUpDomId(l.end),c,i)}))},Ae=function(t,e){return G.info("Extracting classes"),e.db.getClasses()},Ie=function(t,e,r,a){G.info("Drawing flowchart");let n,{securityLevel:i,flowchart:l}=J();"sandbox"===i&&(n=y("#i"+e));let s=y("sandbox"===i?n.nodes()[0].contentDocument.body:"body"),o="sandbox"===i?n.nodes()[0].contentDocument:document,d=a.db.getDirection();void 0===d&&(d="TD");let c,h=l.nodeSpacing||50,u=l.rankSpacing||50,p=new xt({multigraph:!0,compound:!0}).setGraph({rankdir:d,nodesep:h,ranksep:u,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}})),f=a.db.getSubGraphs();for(let y=f.length-1;y>=0;y--)c=f[y],a.db.addVertex(c.id,c.title,"group",void 0,c.classes);let g=a.db.getVertices();G.warn("Get vertices",g);let b=a.db.getEdges(),x=0;for(x=f.length-1;x>=0;x--){c=f[x],ut("cluster").append("text");for(let t=0;t<c.nodes.length;t++)G.warn("Setting subgraph",c.nodes[t],a.db.lookUpDomId(c.nodes[t]),a.db.lookUpDomId(c.id)),p.setParent(a.db.lookUpDomId(c.nodes[t]),a.db.lookUpDomId(c.id))}Zt(g,p,e,s,o,a),Ot(b,p,a);let w=new pt;Ne.addToRender(w),w.arrows().none=function(t,e,r,a){let n=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");_(n,r[a+"Style"])},w.arrows().normal=function(t,e){t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};let v=s.select(`[id="${e}"]`),m=s.select("#"+e+" g");for(w(m,p),m.selectAll("g.node").attr("title",(function(){return a.db.getTooltip(this.id)})),a.db.indexNodes("subGraph"+x),x=0;x<f.length;x++)if(c=f[x],"undefined"!==c.title){let t=o.querySelectorAll("#"+e+' [id="'+a.db.lookUpDomId(c.id)+'"] rect'),r=o.querySelectorAll("#"+e+' [id="'+a.db.lookUpDomId(c.id)+'"]'),n=t[0].x.baseVal.value,i=t[0].y.baseVal.value,l=t[0].width.baseVal.value,s=y(r[0]).select(".label");s.attr("transform",`translate(${n+l/2}, ${i+14})`),s.attr("id",e+"Text");for(let e=0;e<c.classes.length;e++)r[0].classList.add(c.classes[e])}if(!l.htmlLabels){let t=o.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let e of t){let t=e.getBBox(),r=o.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("rx",0),r.setAttribute("ry",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height),e.insertBefore(r,e.firstChild)}}St(p,v,l.diagramPadding,l.useMaxWidth),Object.keys(g).forEach((function(t){let r=g[t];if(r.link){let n=s.select("#"+e+' [id="'+a.db.lookUpDomId(t)+'"]');if(n){let t=o.createElementNS("http://www.w3.org/2000/svg","a");t.setAttributeNS("http://www.w3.org/2000/svg","class",r.classes.join(" ")),t.setAttributeNS("http://www.w3.org/2000/svg","href",r.link),t.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===i?t.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):r.linkTarget&&t.setAttributeNS("http://www.w3.org/2000/svg","target",r.linkTarget);let e=n.insert((function(){return t}),":first-child"),a=n.select(".label-container");a&&e.append((function(){return a.node()}));let l=n.select(".label");l&&e.append((function(){return l.node()}))}}}))},Be={setConf:Ce,addVertices:Zt,addEdges:Ot,getClasses:Ae,draw:Ie},Mr={parser:mt,db:z,renderer:bt,styles:kt,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Be.setConf(t.flowchart),z.clear(),z.setGen("gen-1")}};export{Mr as diagram};